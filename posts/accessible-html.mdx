---
title: Accessible HTML
slug: accessible-html
tags:
  - html
  - a11y
date: 2022-01-25
---

using the correct HTML elements for their intended purpose as much as possible.

## Semantic Elements

> A semantic element clearly describes its meaning to both the browser and the developer.

引用自 [W3C - HTML Semantic Elements](https://www.w3schools.com/html/html5_semantic_elements.asp)，語義化元素能更清楚地向描述開發者或瀏覽器描述其意義

以 [What is the difference between section and div?](https://stackoverflow.com/questions/6939864/what-is-the-difference-between-section-and-div) 來說

- `<div>` 沒有傳達任何意義
- `<section>` 更像一個獨立、相同主題性內容的集合，通常會帶有標題 (heading tag)

html tag 除了有各自語意外，部分元素也帶有預設輔助功能以 `<button>` 為例

- keyboard-fousable
- operable through a keyboard interface (當為 focus 狀態，可透過 `enter` 鍵觸發 click event)

如果以 `<div>` 模擬 `<button>`，則需要額外加上屬性及監聽事件，如下方範例程式碼所示

```jsx
const Button = () => {
  const onClick = (e) => {
    // ....
  };

  const onKeyup = (e) => {
    switch (e.key) {
      case 'Enter':
        onClick();
        break;
      // ....
      default:
        return;
    }
  };
  
  return (
    <div
      tabindex="0"
      role="button"
      onClick={onClick}
      onKeyup={onKeyup}
    >
      button
    </div> 
  );
}
```

有用過 [eslint-plugin-jsx-a11y](https://github.com/jsx-eslint/eslint-plugin-jsx-a11y) 應該看過以下的提示

>Enforce onClick is accompanied by at least one of the following: onKeyUp, onKeyDown, onKeyPress. Coding for the keyboard is important for users with physical disabilities who cannot use a mouse, AT compatibility, and screenreader users. This does not apply for interactive or hidden elements.

因為該元素不支援 keyboard functionality，所以使用者無法透過鍵盤操作觸發 click event，這時候可能的作法有

- 關掉 linter
- 加上 keyboard event
- 改用 semantic elements, e.g. `<button>`, `<a>`, etc...

使用 semantic elements，除了開箱即用的預設輔助功能外，善用作業系統層級或是瀏覽器的標準，在應用端少寫額外的程式碼，也可以有效降低程式碼的複雜度。

下方為 [MDN - HTML: A good basis for accessibility](https://developer.mozilla.org/en-US/docs/Learn/Accessibility/HTML) 列出關於 semantic elements 優點

- **Easier to develop with** — as mentioned above, you get some functionality for free, plus it is arguably easier to understand.
- **Better on mobile** — semantic HTML is arguably lighter in file size than non-semantic spaghetti code, and easier to make responsive.
- **Good for SEO** — search engines give more importance to keywords inside headings, links, etc. than keywords included in non-semantic `<div>`s, etc., so your documents will be more findable by customers.

### Role

> In general, avoid using role. Use semantic HTML elements that implicitly have a role instead.

引用自 gitlab frontend development guidelines

| Bad                         | Good                               |
|-----------------------------|------------------------------------|
| `<div role="button">`       | `<button>`                         |
| `<div role="img">`          | `<img>`                            |
| `<div role="link">`         | `<a>`                              |
| `<div role="header">`       | `<h1>` to `<h6>`                   |
| `<div role="textbox">`      | `<input>` or `<textarea>`          |
| `<div role="article">`      | `<article>`                        |
| `<div role="list">`         | `<ol>` or `<ul>`                   |
| `<div role="listitem">`     | `<li>`                             |
| `<div role="table">`        | `<table>`                          |
| `<div role="rowgroup">`     | `<thead>`, `<tbody>`, or `<tfoot>` |
| `<div role="columnheader">` | `<th>`                             |
| `<div role="cell">`         | `<td>`                             |

## Real World Examples

### Presentation Role

透過 `role="presentation"`，提示輔助技術，忽略該 html tag 的語意

以 icon button 為例，範例中的 `<svg>` 為一個顯示用的 icon，加上 `role="presentation"`（也可以使用 `aria-hidden="true"`），讓該元素從 accessibility tree 中移除

最後在 `<button>` 加上 `aria-label` 描述該按鈕的用途

```html
<button aria-label="Search videos">
  <svg role="presentation" class="search-icon"></svg>
</button>

<!-- or -->
<button aria-label="Search videos">
  <svg aria-hidden="true" class="search-icon"></svg>
</button>
```

---

### Heading Order

[web.dev - Heading Order](https://web.dev/heading-order/)

lighthouse accessibility，會檢測 heading elements 是否有依次降序

以下方範例所示，因為跳過 `<h2>` 元素，所以會出現 `poorly structured headings` 的警告

```html
<div class="page">
  <h1>Page title</h1>
  <section>
    <h3>Section heading 1</h3>
  </section>
  <section>
    <h3>Section heading 2</h3>
  </section>
</div>
```

為什麼依次降序的標題很重要 [Heading Order](https://dequeuniversity.com/rules/axe/3.3/heading-order?lang=en)

- heading elements 的目的為有效地傳達頁面結構
- 視力正常的使用者，可以透過字體大小辨識標題，但字體大小對使用 screen readers 的用戶沒有幫助，有效的標題結構，可以幫助 screen readers 的用戶透過 heading elements 遍歷網頁，替他們節省大量時間

#### 補充

[Google Webmasters Youtube Channel - My site's template has multiple H1 tags](https://www.youtube.com/watch?v=WsgrSxCmMbM)

Google 表示頁面上有多個 `<h1>` 不會對 SEO 造成影響，但有多個 `<h1>` 出現時，不仿多考慮一下

- header hierarchy
- 多個 `<h1>` 是否有幫助頁面閱讀

---

### Labeling Controls

[WAI - Labeling Controls](https://www.w3.org/WAI/tutorials/forms/labels/)

透過 label 識別 labelable elements (input, select, textarea, etc...)，同時提供更多的可點擊區塊

#### Associating labels explicitly

以下方範例來說，`<label>` 加上 `for="email-input"`，當用戶點擊 `<label>` 時，瀏覽器會自動聚焦在 `<input id="email-input">` 上，同時確保輔助技術引用正確的 `<label>`，協助 screen readers 用戶與該表單元件互動

```html
<div role="group">
  <label for="email-input">email</label>
  <input id="email-input" />
</div>
```

#### Associating labels implicitly

`<label>` 為父元素時，內層 `labelable elements` 會被隱含地綁定

常用在客製 radio, checkbox, switch, etc...，如果期望點擊提示文字同時觸發 `<input>` 的 `checked` 變化，implicit labelling 是非常方便的作法，同時 100% 支援 keyboard accessible，可參考 [Create custom keyboard accessible checkboxes](https://dev.to/lkopacz/create-custom-keyboard-accessible-checkboxes-2036)

```html
<label class="checkbox">
  <input type="checkbox" class="visually-hidden">
  <span aria-hidden="true" class="checkbox-icon"></span>
  <span class="checkbox-text">Checkbox</span>
</label>
```

## Reference

[W3C - HTML Semantic Elements](https://www.w3schools.com/html/html5_semantic_elements.asp)

[W3C - HTML Accessibility](https://www.w3schools.com/html/html_accessibility.asp)

[MDN - HTML: A good basis for accessibility](https://developer.mozilla.org/en-US/docs/Learn/Accessibility/HTML)

[Website Accessibility v2 - Accessible HTML](https://learn-a11y.netlify.app/accessible-html/index.html)

[WebAIM - Semantic Structure: Regions, Headings, and Lists](https://webaim.org/techniques/semanticstructure/)

[Google Webmasters Youtube Channel - My site's template has multiple H1 tags](https://www.youtube.com/watch?v=WsgrSxCmMbM)

[Heading Order](https://dequeuniversity.com/rules/axe/3.3/heading-order?lang=en)

[Accessibility GitLab](https://docs.gitlab.com/ee/development/fe_guide/accessibility.html)
